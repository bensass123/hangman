<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hangman</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Bungee+Shade|Cinzel|Eagle+Lake|Walter+Turncoat" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">

  </head>
<body>

<div class="container">
  <div class="panel panel-primary">
    <div class="panel-body"  style="min-height: 600px;">
      <h1 class="title">HANGMAN</h1>

      <div class="jumbotron">
        <div class="container2">
          <h4 id ="word" class="word"></h4>         
        </div>
      </div>


      <h2 id ="win" class="win"></h2>

      <h2 class ="guesses">Guesses left: <span id = "guesses"></span></h2>

      <h4 class="wrongs">Wrong guesses: <span id = "wrongs"></span></h4>

      <div class="newword">
      <h5>For new word:</h5><input type="button" value="Refresh Page" onClick="window.location.reload()"></div>

    </div>
  </div>
</div>

  <script type="text/javascript">

  	var guessesLeft = 9;
  	// var word ="purple";
  	var wordDic = ["purple", "america","easy","difficulty","charlotte","mountains","ocean","pepperoni","gypsy","bufoon","growth","strength","dominate","welcome","reinforce","stalwart","pockets","calabash","rutabega"];

  	// create hangWord, create stringWord, pick word

  	var hangWord = [];
  	var stringWord="-";
  	var wrongLetters = [];
  	var wrongString;
  	var alph = ("abcdefghijklmnopqrstuvwxyz").split("");

  	// initial method calls

    document.getElementById("guesses").innerHTML = guessesLeft;

  	var word = pickWord();
  	createHangWord();
  	createStringWord();

  	console.log(stringWord);
  	console.log(hangWord);


  	// create hangWord, create stringWord, pick word

	function pickWord(){
		var r = Math.floor(Math.random() * 10);
		var word = wordDic[r];
		console.log(word);
		console.log(r);
		return word;
	}

	function createHangWord(){
		for (i = 0; i < word.length; i++){
			hangWord.push("-");
		}
	}

	function createStringWord(){
		for (i = 0; i < word.length-1; i++){
			stringWord += "-";
		}
	}

  	function isGuessRight(guess){
  		for (i = 0; i < word.length; i++) {
  			if (word.charAt(i) === guess)
  				return true
  		}
  		return false;
  	}

  	function replaceCorrects(guess) {
  		var replaceIndex =[];
  		for (i = 0; i < word.length; i++) {
  			if (word.charAt(i) === guess)
  				replaceIndex.push(i);
  		}
  		return replaceIndex;
  	}

  	function addGuess(guess, replaceIndex) {
  		for (i in replaceIndex) {
  			var x = replaceIndex[i];
  			hangWord[x] = guess;
  		}
  	}

  	function win() {
  		for (i in hangWord) {
  			if (hangWord[i] === "-"){
  				return false;
  			}
  		}

  		return true;
  	}

  	function isInWrongs(char) {
  		for (i in wrongLetters){
  			if (char === wrongLetters[i])
  				return true;
  		}
  		return false;
  	}

  	function addWrong(char) {
  			if (!isInWrongs(char)) {
  				guessesLeft -= 1;
	  			document.getElementById("guesses").innerHTML = guessesLeft;
	  			wrongLetters.push(char);
	  			wrongString = wrongLetters.join("");
	  			document.getElementById("wrongs").innerHTML = wrongString;
	  		}
  	}

  	function isLetter(letter) {
  		for (i in alph) {
  			if (alph[i] === letter)
  				return true;
  		}
  		return false;
  	}

  	document.onkeyup = function (event) {
      //old key detection
  			// var letter = event.key;
  			// letter = letter.toLowerCase();

        //new key detection
        var letter = String.fromCharCode(event.keyCode).toLowerCase();
        console.log(letter);
  			if(isLetter(letter) && guessesLeft > 0){
	  			addGuess(letter, replaceCorrects(letter));
	  			console.log(hangWord);
	  			console.log(win());
	  			stringWord = hangWord.join("");
	  			document.getElementById("word").innerHTML = stringWord;
	  			if (win()){
	  				document.getElementById("win").innerHTML = "YOU WIN!";
	  			}
	  			if (!isGuessRight(letter)) {
	  				addWrong(letter);
	  			}

	  			

	  			if (guessesLeft === 0) 
	  				document.getElementById("win").innerHTML = "YOU LOSE!";
  			}

  	}

  	

  	document.getElementById("word").innerHTML = stringWord;
  	// document.getElementById("wrongs").innerHTML = wrongString;


  </script>
  
</body>
</html>